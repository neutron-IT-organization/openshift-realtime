
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.2">
    
    
      
        <title>Home - RealTime on Openshift</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.d7758b05.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#contexte-et-enjeux-des-contraintes-temps-reel-sur-openshift" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="RealTime on Openshift" class="md-header__button md-logo" aria-label="RealTime on Openshift" data-md-component="logo">
      
  <img src="assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RealTime on Openshift
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/neutron-IT-organization/openshift-realtime" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    neutron-IT-organization/openshiftt
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="RealTime on Openshift" class="md-nav__button md-logo" aria-label="RealTime on Openshift" data-md-component="logo">
      
  <img src="assets/logo.png" alt="logo">

    </a>
    RealTime on Openshift
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/neutron-IT-organization/openshift-realtime" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    neutron-IT-organization/openshiftt
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#contexte-et-enjeux-des-contraintes-temps-reel-sur-openshift" class="md-nav__link">
    <span class="md-ellipsis">
      Contexte et enjeux des contraintes temps réel sur OpenShift
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Contexte et enjeux des contraintes temps réel sur OpenShift">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#les-defis-des-workloads-temps-reel" class="md-nav__link">
    <span class="md-ellipsis">
      Les défis des workloads temps réel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openshift-comme-plateforme-unifiee" class="md-nav__link">
    <span class="md-ellipsis">
      OpenShift comme plateforme unifiée
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-de-containers-et-vms-pour-des-workloads-temps-reel" class="md-nav__link">
    <span class="md-ellipsis">
      Intégration de containers et VMs pour des workloads temps réel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Intégration de containers et VMs pour des workloads temps réel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-dopenshift" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration d'OpenShift
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-dun-performanceprofile" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration d'un PerformanceProfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploiement-dun-container-temps-reel" class="md-nav__link">
    <span class="md-ellipsis">
      Déploiement d'un container temps réel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explication-des-qos-dans-openshift" class="md-nav__link">
    <span class="md-ellipsis">
      Explication des QoS dans OpenShift
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploiement-dune-vm-temps-reel" class="md-nav__link">
    <span class="md-ellipsis">
      Déploiement d'une VM temps réel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explication-des-parametres-cles-des-vms-temps-reel" class="md-nav__link">
    <span class="md-ellipsis">
      Explication des paramètres clés des VMs temps réel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-dune-interface-reseau-l2" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation d'une interface réseau L2
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Utilisation d'une interface réseau L2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creation-dun-nad-multus-en-macvlan" class="md-nav__link">
    <span class="md-ellipsis">
      Création d'un NAD Multus en macvlan
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#association-dune-interface-l2-a-un-container" class="md-nav__link">
    <span class="md-ellipsis">
      Association d'une interface L2 à un container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#association-dune-interface-l2-a-une-vm" class="md-nav__link">
    <span class="md-ellipsis">
      Association d'une interface L2 à une VM
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#contexte-et-enjeux-des-contraintes-temps-reel-sur-openshift" class="md-nav__link">
    <span class="md-ellipsis">
      Contexte et enjeux des contraintes temps réel sur OpenShift
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Contexte et enjeux des contraintes temps réel sur OpenShift">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#les-defis-des-workloads-temps-reel" class="md-nav__link">
    <span class="md-ellipsis">
      Les défis des workloads temps réel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openshift-comme-plateforme-unifiee" class="md-nav__link">
    <span class="md-ellipsis">
      OpenShift comme plateforme unifiée
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-de-containers-et-vms-pour-des-workloads-temps-reel" class="md-nav__link">
    <span class="md-ellipsis">
      Intégration de containers et VMs pour des workloads temps réel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Intégration de containers et VMs pour des workloads temps réel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-dopenshift" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration d'OpenShift
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-dun-performanceprofile" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration d'un PerformanceProfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploiement-dun-container-temps-reel" class="md-nav__link">
    <span class="md-ellipsis">
      Déploiement d'un container temps réel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explication-des-qos-dans-openshift" class="md-nav__link">
    <span class="md-ellipsis">
      Explication des QoS dans OpenShift
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploiement-dune-vm-temps-reel" class="md-nav__link">
    <span class="md-ellipsis">
      Déploiement d'une VM temps réel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explication-des-parametres-cles-des-vms-temps-reel" class="md-nav__link">
    <span class="md-ellipsis">
      Explication des paramètres clés des VMs temps réel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-dune-interface-reseau-l2" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation d'une interface réseau L2
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Utilisation d'une interface réseau L2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creation-dun-nad-multus-en-macvlan" class="md-nav__link">
    <span class="md-ellipsis">
      Création d'un NAD Multus en macvlan
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#association-dune-interface-l2-a-un-container" class="md-nav__link">
    <span class="md-ellipsis">
      Association d'une interface L2 à un container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#association-dune-interface-l2-a-une-vm" class="md-nav__link">
    <span class="md-ellipsis">
      Association d'une interface L2 à une VM
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="utiliser-les-capacites-temps-reel-dopenshift">Utiliser les capacités temps réel d'OpenShift</h1>
<p>Face à l'essor des applications à contraintes temps réel dans les environnements industriels et financiers, les entreprises doivent repenser leurs infrastructures pour offrir à la fois flexibilité, faible latence et robustesse. OpenShift, la plateforme de Red Hat basée sur Kubernetes, propose des capacités temps réel pour des workloads containers et machines virtuelles, tout en garantissant la sécurité de ceux-ci. <br />
Cet article explore comment configurer une infrastructure mixte <em>- containers et VMs -</em> optimisée pour les contraintes temps réel.</p>
<h2 id="contexte-et-enjeux-des-contraintes-temps-reel-sur-openshift">Contexte et enjeux des contraintes temps réel sur OpenShift</h2>
<h3 id="les-defis-des-workloads-temps-reel">Les défis des workloads temps réel</h3>
<p>Les applications temps réel exigent un traitement des données et une réponse aux événements dans des délais extrêmement courts et stables. Parmi les enjeux principaux, on retrouve :<br />
- <strong>La prévisibilité du temps de réponse</strong> : L'isolation des ressources (CPU, mémoire et E/S) est indispensable pour éviter les interférences.<br />
- <strong>La latence réseau minimale</strong> : Pour les communications critiques, il est souvent nécessaire d'utiliser des interfaces réseau qui contournent les couches de virtualisation classiques.<br />
- <strong>La gestion simultanée de containers et de VMs</strong> : Certains workloads hérités fonctionnant en VM doivent cohabiter avec des applications nativement containerisées, sans compromettre la performance globale.  </p>
<h3 id="openshift-comme-plateforme-unifiee">OpenShift comme plateforme unifiée</h3>
<p>OpenShift permet de réunir ces deux types de workloads à l'aide de son opérateur OpenShift Virtualization. Ainsi, il devient possible de gérer dans une même plateforme des applications containerisées ultra réactives et des VMs pour des charges traditionnelles. Cette approche facilite notamment la migration progressive des applications vers des architectures modernes tout en garantissant un temps de réponse optimal.</p>
<h2 id="integration-de-containers-et-vms-pour-des-workloads-temps-reel">Intégration de containers et VMs pour des workloads temps réel</h2>
<h3 id="configuration-dopenshift">Configuration d'OpenShift</h3>
<p>Pour exécuter des workloads temps réel, OpenShift doit être configuré avec :<br />
- <strong>Un noyau temps réel</strong> : Disponible via l'opérateur OpenShift RT, ce noyau permet d'améliorer la stabilité des temps de réponse.<br />
- <strong>L'isolation des CPUs</strong> : En dédiant des cœurs spécifiques aux tâches critiques, on réduit la variabilité des performances.<br />
- <strong>L'optimisation des interruptions</strong> : Ajuster les IRQs et configurer l'affinité CPU permet d'éviter les interruptions non désirées.<br />
- <strong>L'utilisation de HugePages</strong> : Cela optimise l'utilisation mémoire et améliore la gestion des latences. <br />
Tout ceci peut être configuré à l'aide d'un <code>PerformanceProfile</code>.</p>
<p><img alt="RT-isolation" src="images/RT-isolation.png" /></p>
<h3 id="configuration-dun-performanceprofile">Configuration d'un PerformanceProfile</h3>
<p>L'activation des performances temps réel passe par la création d'un <code>PerformanceProfile</code> dédié :</p>
<pre><code class="language-yaml">---
apiVersion: performance.openshift.io/v2
kind: PerformanceProfile
metadata:
  name: rt-profile
spec:
  cpu:
    isolated: 2-7
    reserved: 0-1
  hugepages:
    defaultHugepagesSize: 1G
    pages:
      - count: 4
        size: 1G
  realTimeKernel:
    enabled: true
  workloadHints:
    realTime: true
  nodeSelector:
    node-role.kubernetes.io/worker-rt: &quot;&quot;
</code></pre>
<h3 id="deploiement-dun-container-temps-reel">Déploiement d'un container temps réel</h3>
<p>Pour déployer un container temps réel sur OpenShift en QoS guaranteed :</p>
<pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: rt-container
spec:
  containers:
  - name: app-rt
    image: registry.example.com/rt-app:latest
    resources:
      requests:
        cpu: &quot;2&quot;
        memory: &quot;2Gi&quot;
        hugepages-1Gi: &quot;2Gi&quot;
      limits:
        cpu: &quot;2&quot;
        memory: &quot;2Gi&quot;
        hugepages-1Gi: &quot;2Gi&quot;
    securityContext:
      capabilities:
        add:
        - SYS_NICE # Allows the container to adjust scheduling priorities.
        - IPC_LOCK # Enables locking memory to prevent swapping (used in real-time applications).
</code></pre>
<h3 id="explication-des-qos-dans-openshift">Explication des QoS dans OpenShift</h3>
<p><code>guaranteed</code>: Cette classe garantit l'allocation des ressources, elle est définie lorsqu'on spécifie <code>requests</code>égal à <code>limits</code>.</p>
<p><code>burstable</code> : Cette classe permet d'allouer plus de ressources si celles-ci sont disponibles, elle est définie lorsqu'on spécifie <code>limits</code> supérieur à <code>requests</code>.</p>
<p><code>bestEffort</code> : Cette classe utilise les ressources disponibles dynamiquement et peut être expulsé si le nœud manque de ressources, elle est définie lorsqu'on ne spécifie aucune <code>requests</code> et aucune <code>limits</code>.</p>
<h3 id="deploiement-dune-vm-temps-reel">Déploiement d'une VM temps réel</h3>
<p>Pour créer une VM temps réel avec OpenShift Virtualization :</p>
<pre><code class="language-yaml">apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: rt-vm
spec:
  running: true
  template:
    spec:
      domain:
        cpu:
          model: &quot;host-passthrough&quot; # Uses the host CPU model for optimal performance.
          cores: 2 # Number of virtual CPU cores allocated to the VM.
          dedicatedCpuPlacement: true # Ensures CPU cores are dedicated for the VM.
          isolateEmulatorThread: true # Isolates the emulator thread for better latency.
        memory:
          hugepages:
            pageSize: &quot;1Gi&quot;
        resources:
          requests:
            memory: &quot;4Gi&quot;
          limits:
            memory: &quot;4Gi&quot;
        devices:
          disks:
            - name: rootdisk
              disk:
                bus: virtio
          interfaces:
            - name: default
              bridge: {}
      networks:
        - name: default
          pod: {}
  dataVolumeTemplates:
    - metadata:
        name: rt-vm-disk
      spec:
        source:
          http:
            url: &quot;http://example.com/rt-vm.qcow2&quot;
        pvc:
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: 10Gi
</code></pre>
<h3 id="explication-des-parametres-cles-des-vms-temps-reel">Explication des paramètres clés des VMs temps réel</h3>
<p><code>host-passthrough</code> : Ce paramètre permet de passer directement le modèle de CPU de l'hôte à la VM, garantissant ainsi une compatibilité et une performance maximales. Il évite l'émulation de certaines instructions CPU, réduisant ainsi la latence et augmentant la stabilité du temps de réponse.</p>
<p><code>dedicatedCpuPlacement</code> : L'activation de cette option garantit que les cœurs CPU alloués à la VM ne seront pas partagés avec d'autres workloads, améliorant ainsi la prévisibilité des performances et minimisant l'interférence avec d'autres processus exécutés sur le nœud.</p>
<p><code>isolateEmulatorThread</code> : L'activation de ce paramètre permet d'isoler le thread de l'émulateur, ce qui réduit la latence de l'émulation et améliore les performances en cas de workloads nécessitant un traitement rapide et déterministe.</p>
<h2 id="utilisation-dune-interface-reseau-l2">Utilisation d'une interface réseau L2</h2>
<p>Les applications temps réel requièrent souvent une communication réseau à faible latence et haut débit. L'utilisation d'une interface réseau L2 permet de réduire la surcharge introduite par les couches de virtualisation réseau classiques et d'offrir une connectivité directe entre les workloads. 
<img alt="OSI Model" class="scaled-image" src="images/OSI-model.png" />  </p>
<p>OpenShift permet d'exploiter Multus pour créer des interfaces L2 en utilisant macvlan.
<img alt="macvlan" class="scaled-image" src="images/macvaln.png" /></p>
<h3 id="creation-dun-nad-multus-en-macvlan">Création d'un NAD Multus en macvlan</h3>
<pre><code class="language-yaml">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: l2-interface
  namespace: example-namespace
spec:
  config: '{
    &quot;cniVersion&quot;: &quot;0.3.1&quot;,
    &quot;type&quot;: &quot;macvlan&quot;,
    &quot;master&quot;: &quot;enp3s0&quot;,
    &quot;mode&quot;: &quot;bridge&quot;,
    &quot;ipam&quot;: { &quot;type&quot;: &quot;dhcp&quot; }
  }'
</code></pre>
<h3 id="association-dune-interface-l2-a-un-container">Association d'une interface L2 à un container</h3>
<pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: rt-container-l2
  annotations:
    k8s.v1.cni.cncf.io/networks: example-namespace/l2-interface
spec:
  containers:
  - name: rt-app
    image: registry.example.com/rt-app:latest
</code></pre>
<h3 id="association-dune-interface-l2-a-une-vm">Association d'une interface L2 à une VM</h3>
<pre><code class="language-yaml">spec:
  template:
    spec:
      networks:
        - name: l2-net
          multus:
            networkName: example-namespace/l2-interface
      domain:
        devices:
          interfaces:
            - name: l2-net
              bridge: {}
</code></pre>
<h2 id="conclusion">Conclusion</h2>
<p>OpenShift offre une plateforme unifiée pour exécuter des workloads temps réel en combinant containers et machines virtuelles. Grâce à ses capacités d'optimisation des performances, de gestion fine des ressources et de mise en réseau avancée, il répond aux exigences des environnements industriels et financiers critiques. En configurant correctement les ressources CPU, mémoire et réseau, il est possible d'atteindre une faible latence et une grande prévisibilité, garantissant ainsi la stabilité et la performance des applications temps réel.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "navigation.indexes"], "search": "assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.f13b1293.min.js"></script>
      
    
  </body>
</html>